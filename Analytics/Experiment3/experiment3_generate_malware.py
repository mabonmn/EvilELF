import csv
import os
malware = []

base_path = "../../MultiEvasion/data/all_files/"

#Only one os.system(command) should be uncommented at a time typically

#replace the number used for the csv file to do a new experiment,
#  this should be run first to generate malware for an experiment

# This loop is for generating malware using only the base malware and inserting/altering constants
with open('Source_Malware4.csv', newline='\n') as csvfile:
    reader = csv.DictReader(csvfile,fieldnames=['name'])
    for row in reader:
        malware.append(row['name'])
        command = "./experiment2_support_constants " + base_path + row['name']
        os.system(command)

# this loop is for generating malware while utilizing additional benign files to aid the modifications
with open('Source_Benignware4.csv', newline='\n') as csvfile:
    reader = csv.DictReader(csvfile,fieldnames=['name'])
    for row in reader:
        for file in malware:
            command = "./experiment3_support " + base_path + file + " " + base_path + row['name']
            # os.system(command)
